<p>A <dfn>Private Field object</dfn> is an internal, unobservable object <!--TODO(littledan): Use language similar to Data Blocks for unobtainable things--> which represents a private field name. A private field may be installed on any ECMAScript object with the PrivateFieldAdd internal algorithm, and then read or written using PrivateFieldGet and PrivateFieldSet. This includes Proxies and all embedder objects, and does not include primitives such as Numbers.</p>

<p>Private Field objects are records with a single internal slot, [[PrivateID]]. This is an unobservable globally unique identifier which can be used as a key in a Record. All ECMAScript objects have a new additional internal slot, [[PrivateFields]], which is a Record mapping PrivateIDs to values. This represents the value of the private field for the object.</p>

<!-- TOOD(littledan): Is it OK to have the ID be a key in a record, or do I have to make a key-value list like WeakMaps have? -->

<emu-clause id="sec-newprivatefield" aoid="NewPrivateField">
  <h1>NewPrivateField ()</h1>
  <emu-alg>
    1. Let _id_ be a new globally unique identifier.
    1. Return a Record of { [[PrivateID]]: _id_}.
  </emu-alg>
</emu-clause>

<emu-clause id="sec-privatefieldadd" aoid="PrivateFieldAdd">
  <h1>PrivateFieldAdd (_P_, _O_, _value_)</h1>
  <emu-alg>
    1. Assert: _P_ is a record with a [[PrivateID]] field.
    1. If _O_ is not an object, throw a *TypeError* exception.
    1. If _O_.[[PrivateFields]] has an entry for _P_.[[PrivateID]], throw a *TypeError* exception.
    1. Set _O_.[[PrivateFields]]'s entry at _P_.[[PrivateID]] to _value_.
  </emu-alg>
</emu-clause>

<emu-clause id="sec-weakmapget" aoid="WeakMapGet">
  <h1>PrivateFieldGet (_P_, _O_ )</h1>
  <emu-alg>
    1. Assert: _P_ is a record with a [[PrivateID]] field.
    1. If _O_ is not an object, throw a *TypeError* exception.
    1. If _O_.[[PrivateFields]] does not have an entry for _P_.[[PrivateID]], throw a *TypeError* exception.
    1. Return _O_.[[PrivateFields]]'s entry at _P_.[[PrivateID]].
  </emu-alg>
</emu-clause>

<emu-clause id="sec-weakmapset" aoid="WeakMapSet">
  <h1>PrivateFieldSet (_P_, _O_, _value_ )</h1>
  <emu-alg>
    1. Assert: _P_ is a record with a [[PrivateID]] field.
    1. If _O_ is not an object, throw a *TypeError* exception.
    1. If _O_.[[PrivateFields]] does not have entry for _P_.[[PrivateID]], throw a *TypeError* exception.
    1. Set _O_.[[PrivateFields]]'s entry at _P_.[[PrivateID]] to _value_.
  </emu-alg>
</emu-clause>
