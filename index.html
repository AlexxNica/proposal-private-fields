<!doctype html>
<head><meta charset="utf-8">
<title>Private Fields</title><script type="application/json" id="menu-search-biblio">[{"type":"clause","id":"sec-introduction","aoid":null,"title":"Introduction","number":"1","location":"","key":"Introduction"},{"type":"clause","id":"sec-privatefielddefinitions","aoid":null,"title":"Private Field Definitions","number":"2","location":"","key":"Private Field Definitions"},{"type":"clause","id":"sec-private-names-static-semantics-stringvalue","aoid":null,"title":"Static Semantics: StringValue","number":"2.1","location":"","key":"Static Semantics: StringValue"},{"type":"clause","id":"sec-private-names-bound-names","aoid":null,"title":"Static Semantics: BoundNames","number":"2.2","location":"","key":"Static Semantics: BoundNames"},{"type":"clause","id":"sec-private-field-definition-early-errors","aoid":null,"title":"Static Semantics: Eary Errors","number":"2.3","location":"","key":"Static Semantics: Eary Errors"},{"type":"clause","id":"sec-private-field-definitions","aoid":null,"title":"Static Semantics: PrivateFieldDefinitions","number":"2.4","location":"","key":"Static Semantics: PrivateFieldDefinitions"},{"type":"clause","id":"sec-instance-slot-definition","aoid":null,"title":"Runtime Semantics: PrivateFieldDefinitionEvaluation","number":"2.5","location":"","key":"Runtime Semantics: PrivateFieldDefinitionEvaluation"},{"type":"clause","id":"sec-runtime-semantics-classdefinitionevaluation","aoid":null,"title":"Runtime Semantics: ClassDefinitionEvaluation","number":"2.6","location":"","key":"Runtime Semantics: ClassDefinitionEvaluation"},{"type":"clause","id":"sec-initialization","aoid":null,"title":"Allocation and Initialization","number":"3","location":"","key":"Allocation and Initialization"},{"type":"clause","id":"sec-intiializeprivatefields","aoid":"InitializePrivateFields","title":"InitializePrivateFields ( _O_, _constructor_ )","number":"3.1","location":"","key":"InitializePrivateFields ( _O_, _constructor_ )"},{"type":"op","aoid":"InitializePrivateFields","refId":"sec-intiializeprivatefields","location":"","key":"InitializePrivateFields"},{"type":"clause","id":"sec-ecmascript-function-objects-construct-argumentslist-newtarget","aoid":null,"title":"[[Construct]] ( _argumentsList_, _newTarget_ )","number":"3.2","location":"","key":"[[Construct]] ( _argumentsList_, _newTarget_ )"},{"type":"clause","id":"sec-super-keyword","aoid":null,"title":"The `super` Keyword","number":"3.3","location":"","key":"The `super` Keyword"},{"type":"clause","id":"sec-super-keyword-runtime-semantics-evaluation","aoid":null,"title":"Runtime Semantics: Evaluation","number":"3.3.1","location":"","key":"Runtime Semantics: Evaluation"},{"type":"clause","id":"sec-private-references","aoid":null,"title":"Private References","number":"4","location":"","key":"Private References"},{"type":"clause","id":"sec-private-references-runtime-semantics-evaluation","aoid":null,"title":"Runtime Semantics: Evaluation","number":"4.1","location":"","key":"Runtime Semantics: Evaluation"},{"type":"clause","id":"sec-delete-operator","aoid":null,"title":"The `delete` Operator","number":"4.2","location":"","key":"The `delete` Operator"},{"type":"clause","id":"sec-delete-operator-static-semantics-early-errors","aoid":null,"title":"Static Semantics: Early Errors","number":"4.2.1","location":"","key":"Static Semantics: Early Errors"},{"type":"clause","id":"sec-delete-operator-runtime-semantics-evaluation","aoid":null,"title":"Runtime Semantics: Evaluation","number":"4.2.2","location":"","key":"Runtime Semantics: Evaluation"},{"type":"clause","id":"sec-reference-specification-type","aoid":null,"title":"The Reference Specification Type","number":"4.3","location":"","key":"The Reference Specification Type"},{"type":"clause","id":"sec-getvalue","aoid":"GetValue","title":"GetValue ( _V_ )","number":"4.3.1","location":"","key":"GetValue ( _V_ )"},{"type":"op","aoid":"GetValue","refId":"sec-getvalue","location":"","key":"GetValue"},{"type":"clause","id":"sec-putvalue","aoid":"PutValue","title":"PutValue ( _V_, _W_ )","number":"4.3.2","location":"","key":"PutValue ( _V_, _W_ )"},{"type":"op","aoid":"PutValue","refId":"sec-putvalue","location":"","key":"PutValue"},{"type":"clause","id":"sec-makeprivatereference","aoid":"MakePrivateReference","title":"MakePrivateReference ( _baseValue_, _fieldName_ )","number":"4.3.3","location":"","key":"MakePrivateReference ( _baseValue_, _fieldName_ )"},{"type":"op","aoid":"MakePrivateReference","refId":"sec-makeprivatereference","location":"","key":"MakePrivateReference"},{"type":"clause","id":"sec-weakmap-abstract-operations","aoid":null,"title":"WeakMap Abstract Operations","number":"5","location":"","key":"WeakMap Abstract Operations"},{"type":"clause","id":"sec-weakmap.prototype.has","aoid":null,"title":"WeakMap.prototype.has ( _key_ )","number":"5.1","location":"","key":"WeakMap.prototype.has ( _key_ )"},{"type":"clause","id":"sec-weakmap.prototype.get","aoid":null,"title":"WeakMap.prototype.get ( _key_ )","number":"5.2","location":"","key":"WeakMap.prototype.get ( _key_ )"},{"type":"clause","id":"sec-weakmap.prototype.set","aoid":null,"title":"WeakMap.prototype.set ( _key_ , _value_ )","number":"5.3","location":"","key":"WeakMap.prototype.set ( _key_ , _value_ )"},{"type":"clause","id":"sec-weakmaphas","aoid":"WeakMapHas","title":"WeakMapHas (_M_, _key_ )","number":"5.4","location":"","key":"WeakMapHas (_M_, _key_ )"},{"type":"op","aoid":"WeakMapHas","refId":"sec-weakmaphas","location":"","key":"WeakMapHas"},{"type":"clause","id":"sec-weakmapget","aoid":"WeakMapGet","title":"WeakMapGet (_M_, _key_ )","number":"5.5","location":"","key":"WeakMapGet (_M_, _key_ )"},{"type":"op","aoid":"WeakMapGet","refId":"sec-weakmapget","location":"","key":"WeakMapGet"},{"type":"clause","id":"sec-weakmapset","aoid":"WeakMapSet","title":"WeakMapSet (_M_, _key_, _value_ )","number":"5.6","location":"","key":"WeakMapSet (_M_, _key_, _value_ )"},{"type":"op","aoid":"WeakMapSet","refId":"sec-weakmapset","location":"","key":"WeakMapSet"},{"type":"production","id":"prod-PrivateName","name":"PrivateName","location":"","key":"PrivateName"},{"type":"production","id":"prod-ClassElement","name":"ClassElement","location":"","key":"ClassElement"},{"type":"production","id":"prod-PrivateFieldDefinition","name":"PrivateFieldDefinition","location":"","key":"PrivateFieldDefinition"},{"type":"production","id":"prod-ClassElementList","name":"ClassElementList","location":"","key":"ClassElementList"},{"type":"production","id":"prod-ClassBody","name":"ClassBody","location":"","key":"ClassBody"},{"type":"production","id":"prod-ClassTail","name":"ClassTail","location":"","key":"ClassTail"},{"type":"production","id":"prod-SuperCall","name":"SuperCall","location":"","key":"SuperCall"},{"type":"production","id":"prod-MemberExpression","name":"MemberExpression","location":"","key":"MemberExpression"},{"type":"production","id":"prod-UnaryExpression","name":"UnaryExpression","location":"","key":"UnaryExpression"},{"type":"production","id":"prod-PrimaryExpression","name":"PrimaryExpression","location":"","key":"PrimaryExpression"},{"type":"production","id":"prod-MemberExression","name":"MemberExression","location":"","key":"MemberExression"},{"type":"term","term":"Reference","refId":"sec-reference-specification-type","location":"","key":"Reference"}]</script></head><body><div id="menu-toggle">☰</div><div id="menu"><div id="menu-search"><input type="text" id="menu-search-box" placeholder="Search..."><div id="menu-search-results" class="inactive"></div></div><div id="menu-toc"><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-introduction" title="Introduction"><span class="secnum">1</span> Introduction</a></li><li><span class="item-toggle">◢</span><a href="#sec-privatefielddefinitions" title="Private Field Definitions"><span class="secnum">2</span> Private Field Definitions</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-private-names-static-semantics-stringvalue" title="Static Semantics: StringValue"><span class="secnum">2.1</span> SS: StringValue</a></li><li><span class="item-toggle-none"></span><a href="#sec-private-names-bound-names" title="Static Semantics: BoundNames"><span class="secnum">2.2</span> SS: BoundNames</a></li><li><span class="item-toggle-none"></span><a href="#sec-private-field-definition-early-errors" title="Static Semantics: Eary Errors"><span class="secnum">2.3</span> SS: Eary Errors</a></li><li><span class="item-toggle-none"></span><a href="#sec-private-field-definitions" title="Static Semantics: PrivateFieldDefinitions"><span class="secnum">2.4</span> SS: PrivateFieldDefinitions</a></li><li><span class="item-toggle-none"></span><a href="#sec-instance-slot-definition" title="Runtime Semantics: PrivateFieldDefinitionEvaluation"><span class="secnum">2.5</span> RS: PrivateFieldDefinitionEvaluation</a></li><li><span class="item-toggle-none"></span><a href="#sec-runtime-semantics-classdefinitionevaluation" title="Runtime Semantics: ClassDefinitionEvaluation"><span class="secnum">2.6</span> RS: ClassDefinitionEvaluation</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-initialization" title="Allocation and Initialization"><span class="secnum">3</span> Allocation and Initialization</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-intiializeprivatefields" title="InitializePrivateFields ( _O_, _constructor_ )"><span class="secnum">3.1</span> InitializePrivateFields ( <var>O</var>, <var>constructor</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-ecmascript-function-objects-construct-argumentslist-newtarget" title="[[Construct]] ( _argumentsList_, _newTarget_ )"><span class="secnum">3.2</span> [[Construct]] ( <var>argumentsList</var>, <var>newTarget</var> )</a></li><li><span class="item-toggle">◢</span><a href="#sec-super-keyword" title="The `super` Keyword"><span class="secnum">3.3</span> The <code>super</code> Keyword</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-super-keyword-runtime-semantics-evaluation" title="Runtime Semantics: Evaluation"><span class="secnum">3.3.1</span> RS: Evaluation</a></li></ol></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-private-references" title="Private References"><span class="secnum">4</span> Private References</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-private-references-runtime-semantics-evaluation" title="Runtime Semantics: Evaluation"><span class="secnum">4.1</span> RS: Evaluation</a></li><li><span class="item-toggle">◢</span><a href="#sec-delete-operator" title="The `delete` Operator"><span class="secnum">4.2</span> The <code>delete</code> Operator</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-delete-operator-static-semantics-early-errors" title="Static Semantics: Early Errors"><span class="secnum">4.2.1</span> SS: Early Errors</a></li><li><span class="item-toggle-none"></span><a href="#sec-delete-operator-runtime-semantics-evaluation" title="Runtime Semantics: Evaluation"><span class="secnum">4.2.2</span> RS: Evaluation</a></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-reference-specification-type" title="The Reference Specification Type"><span class="secnum">4.3</span> The Reference Specification Type</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-getvalue" title="GetValue ( _V_ )"><span class="secnum">4.3.1</span> GetValue ( <var>V</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-putvalue" title="PutValue ( _V_, _W_ )"><span class="secnum">4.3.2</span> PutValue ( <var>V</var>, <var>W</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-makeprivatereference" title="MakePrivateReference ( _baseValue_, _fieldName_ )"><span class="secnum">4.3.3</span> MakePrivateReference ( <var>baseValue</var>, <var>fieldName</var> )</a></li></ol></li></ol></li><li><span class="item-toggle">◢</span><a href="#sec-weakmap-abstract-operations" title="WeakMap Abstract Operations"><span class="secnum">5</span> WeakMap Abstract Operations</a><ol class="toc"><li><span class="item-toggle-none"></span><a href="#sec-weakmap.prototype.has" title="WeakMap.prototype.has ( _key_ )"><span class="secnum">5.1</span> WeakMap.prototype.has ( <var>key</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-weakmap.prototype.get" title="WeakMap.prototype.get ( _key_ )"><span class="secnum">5.2</span> WeakMap.prototype.get ( <var>key</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-weakmap.prototype.set" title="WeakMap.prototype.set ( _key_ , _value_ )"><span class="secnum">5.3</span> WeakMap.prototype.set ( <var>key</var> , <var>value</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-weakmaphas" title="WeakMapHas (_M_, _key_ )"><span class="secnum">5.4</span> WeakMapHas (<var>M</var>, <var>key</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-weakmapget" title="WeakMapGet (_M_, _key_ )"><span class="secnum">5.5</span> WeakMapGet (<var>M</var>, <var>key</var> )</a></li><li><span class="item-toggle-none"></span><a href="#sec-weakmapset" title="WeakMapSet (_M_, _key_, _value_ )"><span class="secnum">5.6</span> WeakMapSet (<var>M</var>, <var>key</var>, <var>value</var> )</a></li></ol></li></ol></div></div><h1 class="version">Stage 0 Draft / February 2, 2016</h1><h1 class="title">Private Fields</h1>
<script src="https://bterlson.github.io/ecmarkup/ecmarkup.js" defer=""></script>
<link rel="stylesheet" href="https://bterlson.github.io/ecmarkup/elements.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/solarized_light.min.css">

<emu-clause id="sec-introduction">
  <h1><span class="secnum">1</span>Introduction<span class="utils"><span class="anchor"><a href="#sec-introduction">#</a></span></span></h1>
  <emu-import href="./introduction.html"><p>This proposal adds syntactic support for per-instance private object state by means of private field declarations within class bodies.</p>

<p>See  <a href="https://github.com/zenparsing/es-private-fields">the proposal repository</a> for background material and discussion.</p>
</emu-import>
</emu-clause>

<emu-clause id="sec-privatefielddefinitions">
  <h1><span class="secnum">2</span>Private Field Definitions<span class="utils"><span class="anchor"><a href="#sec-privatefielddefinitions">#</a></span></span></h1>
  <emu-import href="./definitions.html"><h2>Syntax</h2>
<!-- TODO: Do we want to allow @1, for instance? -->
<emu-grammar><emu-production name="PrivateName" type="lexical" id="prod-PrivateName">
    <emu-nt><a href="#prod-PrivateName">PrivateName</a></emu-nt><emu-geq>::</emu-geq><emu-rhs a="96d7ebfd"><emu-t>#</emu-t><emu-nt><a href="https://tc39.github.io/ecma262#prod-IdentifierPart">IdentifierPart</a></emu-nt></emu-rhs>
    <emu-rhs a="87e79b99"><emu-nt><a href="#prod-PrivateName">PrivateName</a></emu-nt><emu-nt><a href="https://tc39.github.io/ecma262#prod-IdentifierPart">IdentifierPart</a></emu-nt></emu-rhs>
</emu-production>
<emu-production name="ClassElement" params="Yield" id="prod-ClassElement">
    <emu-nt params="Yield"><a href="#prod-ClassElement">ClassElement</a><emu-mods><emu-params>[Yield]</emu-params></emu-mods></emu-nt><emu-geq>:</emu-geq><emu-rhs a="da6bdd4c"><emu-nt params="?Yield"><a href="https://tc39.github.io/ecma262#prod-MethodDefinition">MethodDefinition</a><emu-mods><emu-params>[?Yield]</emu-params></emu-mods></emu-nt></emu-rhs>
    <emu-rhs a="80402d39"><emu-t>static</emu-t><emu-nt params="?Yield"><a href="https://tc39.github.io/ecma262#prod-MethodDefinition">MethodDefinition</a><emu-mods><emu-params>[?Yield]</emu-params></emu-mods></emu-nt></emu-rhs>
    <emu-rhs a="5f0c42e6"><emu-nt params="?Yield"><a href="#prod-PrivateFieldDefinition">PrivateFieldDefinition</a><emu-mods><emu-params>[?Yield]</emu-params></emu-mods></emu-nt></emu-rhs>
    <emu-rhs a="4a0dac03"><emu-t>;</emu-t></emu-rhs>
</emu-production>
<emu-production name="PrivateFieldDefinition" params="Yield" id="prod-PrivateFieldDefinition">
    <emu-nt params="Yield"><a href="#prod-PrivateFieldDefinition">PrivateFieldDefinition</a><emu-mods><emu-params>[Yield]</emu-params></emu-mods></emu-nt><emu-geq>:</emu-geq><emu-rhs a="ce92e404"><emu-nt><a href="#prod-PrivateName">PrivateName</a></emu-nt><emu-nt params="In, ?Yield" optional=""><a href="https://tc39.github.io/ecma262#prod-Initializer">Initializer</a><emu-mods><emu-params>[In, ?Yield]</emu-params><emu-opt>opt</emu-opt></emu-mods></emu-nt><emu-t>;</emu-t></emu-rhs>
</emu-production></emu-grammar>

<emu-clause id="sec-private-names-static-semantics-stringvalue">
  <h1><span class="secnum">2.1</span>Static Semantics: StringValue<span class="utils"><span class="anchor"><a href="#sec-private-names-static-semantics-stringvalue">#</a></span></span></h1>
  <emu-see-also-para op="StringValue"></emu-see-also-para>
  <emu-grammar><emu-production name="PrivateName" type="lexical">
    <emu-nt><a href="#prod-PrivateName">PrivateName</a></emu-nt><emu-geq>::</emu-geq><emu-rhs a="96d7ebfd"><emu-t>#</emu-t><emu-nt><a href="https://tc39.github.io/ecma262#prod-IdentifierPart">IdentifierPart</a></emu-nt></emu-rhs>
    <emu-rhs a="87e79b99"><emu-nt><a href="#prod-PrivateName">PrivateName</a></emu-nt><emu-nt><a href="https://tc39.github.io/ecma262#prod-IdentifierPart">IdentifierPart</a></emu-nt></emu-rhs>
</emu-production></emu-grammar>
  <emu-alg><ol><li>Return the String value consisting of the sequence of code units corresponding to <emu-nt><a href="#prod-PrivateName">PrivateName</a></emu-nt>. In determining the sequence any occurrences of <code>\</code> <emu-nt><a href="https://tc39.github.io/ecma262#prod-UnicodeEscapeSequence">UnicodeEscapeSequence</a></emu-nt> are first replaced with the code point represented by the <emu-nt><a href="https://tc39.github.io/ecma262#prod-UnicodeEscapeSequence">UnicodeEscapeSequence</a></emu-nt> and then the code points of the entire <emu-nt><a href="#prod-PrivateName">PrivateName</a></emu-nt> are converted to code units by <emu-xref aoid="UTF16Encoding"><a href="https://tc39.github.io/ecma262#sec-utf16encoding">UTF16Encoding</a></emu-xref> (<emu-xref href="#sec-utf16encoding"><a href="https://tc39.github.io/ecma262#sec-utf16encoding">10.1.1</a></emu-xref>) each code point.
  </li></ol></emu-alg>
</emu-clause>

<emu-clause id="sec-private-names-bound-names">
  <h1><span class="secnum">2.2</span>Static Semantics: BoundNames<span class="utils"><span class="anchor"><a href="#sec-private-names-bound-names">#</a></span></span></h1>

  <emu-grammar collapsed=""><emu-production name="PrivateFieldDefinition">
    <emu-nt><a href="#prod-PrivateFieldDefinition">PrivateFieldDefinition</a></emu-nt><emu-geq>:</emu-geq><emu-rhs a="03cc3058"><emu-nt><a href="#prod-PrivateName">PrivateName</a></emu-nt><emu-nt optional=""><a href="https://tc39.github.io/ecma262#prod-Initializer">Initializer</a><emu-mods><emu-opt>opt</emu-opt></emu-mods></emu-nt><emu-t>;</emu-t></emu-rhs>
</emu-production></emu-grammar>
  <emu-alg><ol><li>Return a new <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.github.io/ecma262#sec-list-and-record-specification-type">List</a></emu-xref> containing the StringValue of <emu-nt><a href="#prod-PrivateName">PrivateName</a></emu-nt>.
  </li></ol></emu-alg>

  <emu-grammar collapsed=""><emu-production name="ClassElement">
    <emu-nt><a href="#prod-ClassElement">ClassElement</a></emu-nt><emu-geq>:</emu-geq><emu-rhs a="4bc22514"><emu-nt><a href="https://tc39.github.io/ecma262#prod-MethodDefinition">MethodDefinition</a></emu-nt></emu-rhs>
</emu-production>
<emu-production name="ClassElement">
    <emu-nt><a href="#prod-ClassElement">ClassElement</a></emu-nt><emu-geq>:</emu-geq><emu-rhs a="fa58c6b5"><emu-t>static</emu-t><emu-nt><a href="https://tc39.github.io/ecma262#prod-MethodDefinition">MethodDefinition</a></emu-nt></emu-rhs>
</emu-production>
<emu-production name="ClassElement">
    <emu-nt><a href="#prod-ClassElement">ClassElement</a></emu-nt><emu-geq>:</emu-geq><emu-rhs a="4a0dac03"><emu-t>;</emu-t></emu-rhs>
</emu-production></emu-grammar>
  <emu-alg><ol><li>Return a new empty <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.github.io/ecma262#sec-list-and-record-specification-type">List</a></emu-xref>.
  </li></ol></emu-alg>

  <emu-grammar collapsed=""><emu-production name="ClassElement">
    <emu-nt><a href="#prod-ClassElement">ClassElement</a></emu-nt><emu-geq>:</emu-geq><emu-rhs a="a97886b0"><emu-nt><a href="#prod-PrivateFieldDefinition">PrivateFieldDefinition</a></emu-nt></emu-rhs>
</emu-production></emu-grammar>
  <emu-alg><ol><li>Return BoundNames of <emu-nt><a href="#prod-PrivateFieldDefinition">PrivateFieldDefinition</a></emu-nt>.
  </li></ol></emu-alg>

  <emu-grammar collapsed=""><emu-production name="ClassElementList" id="prod-ClassElementList">
    <emu-nt><a href="#prod-ClassElementList">ClassElementList</a></emu-nt><emu-geq>:</emu-geq><emu-rhs a="711bcbba"><emu-nt><a href="#prod-ClassElement">ClassElement</a></emu-nt></emu-rhs>
</emu-production></emu-grammar>
  <emu-alg><ol><li>Return BoundNames of <emu-nt><a href="#prod-ClassElement">ClassElement</a></emu-nt>.
  </li></ol></emu-alg>

  <emu-grammar collapsed=""><emu-production name="ClassElementList">
    <emu-nt><a href="#prod-ClassElementList">ClassElementList</a></emu-nt><emu-geq>:</emu-geq><emu-rhs a="9ac50b6a"><emu-nt><a href="#prod-ClassElementList">ClassElementList</a></emu-nt><emu-nt><a href="#prod-ClassElement">ClassElement</a></emu-nt></emu-rhs>
</emu-production></emu-grammar>
  <emu-alg><ol><li>Let <var>names</var> be BoundNames of <emu-nt><a href="#prod-ClassElementList">ClassElementList</a></emu-nt>.</li><li>Append to <var>names</var> the elements of BoundNames of <emu-nt><a href="#prod-ClassElement">ClassElement</a></emu-nt>.</li><li>Return <var>names</var>.
  </li></ol></emu-alg>

  <emu-grammar collapsed=""><emu-production name="ClassBody" id="prod-ClassBody">
    <emu-nt><a href="#prod-ClassBody">ClassBody</a></emu-nt><emu-geq>:</emu-geq><emu-rhs a="d72d43ba"><emu-nt><a href="#prod-ClassElementList">ClassElementList</a></emu-nt></emu-rhs>
</emu-production></emu-grammar>
  <emu-alg><ol><li>Return BoundNames of <emu-nt><a href="#prod-ClassElementList">ClassElementList</a></emu-nt>.
  </li></ol></emu-alg>
</emu-clause>

<emu-clause id="sec-private-field-definition-early-errors">
  <h1><span class="secnum">2.3</span>Static Semantics: Eary Errors<span class="utils"><span class="anchor"><a href="#sec-private-field-definition-early-errors">#</a></span></span></h1>
  <emu-grammar collapsed=""><emu-production name="ClassBody">
    <emu-nt><a href="#prod-ClassBody">ClassBody</a></emu-nt><emu-geq>:</emu-geq><emu-rhs a="d72d43ba"><emu-nt><a href="#prod-ClassElementList">ClassElementList</a></emu-nt></emu-rhs>
</emu-production></emu-grammar>
  <emu-alg><ol><li>It is a SyntaxError if BoundNames of <emu-nt><a href="#prod-ClassElementList">ClassElementList</a></emu-nt> contains any duplicate entries.
  </li></ol></emu-alg>
</emu-clause>

<!-- TODO Other static rules which might be needed for class evaluation: IsStatic, PropName -->

<!-- TODO Modify NonConstructorMethodDefinitions so that it doesn't include private field definitions -->

<emu-clause id="sec-private-field-definitions">
  <h1><span class="secnum">2.4</span>Static Semantics: PrivateFieldDefinitions<span class="utils"><span class="anchor"><a href="#sec-private-field-definitions">#</a></span></span></h1>
  <emu-grammar collapsed=""><emu-production name="ClassElementList">
    <emu-nt><a href="#prod-ClassElementList">ClassElementList</a></emu-nt><emu-geq>:</emu-geq><emu-rhs a="711bcbba"><emu-nt><a href="#prod-ClassElement">ClassElement</a></emu-nt></emu-rhs>
</emu-production></emu-grammar>
  <emu-alg><ol><li>If <emu-nt><a href="#prod-ClassElement">ClassElement</a></emu-nt> is the production <emu-grammar collapsed=""><emu-production name="ClassElement" class=" inline">
    <emu-nt><a href="#prod-ClassElement">ClassElement</a></emu-nt><emu-geq>:</emu-geq><emu-rhs a="a97886b0"><emu-nt><a href="#prod-PrivateFieldDefinition">PrivateFieldDefinition</a></emu-nt></emu-rhs>
</emu-production></emu-grammar> , return a <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.github.io/ecma262#sec-list-and-record-specification-type">List</a></emu-xref> containing <emu-nt><a href="#prod-ClassElement">ClassElement</a></emu-nt>.</li><li>Else, return a new empty <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.github.io/ecma262#sec-list-and-record-specification-type">List</a></emu-xref>.
  </li></ol></emu-alg>
  <emu-grammar collapsed=""><emu-production name="ClassElementList">
    <emu-nt><a href="#prod-ClassElementList">ClassElementList</a></emu-nt><emu-geq>:</emu-geq><emu-rhs a="9ac50b6a"><emu-nt><a href="#prod-ClassElementList">ClassElementList</a></emu-nt><emu-nt><a href="#prod-ClassElement">ClassElement</a></emu-nt></emu-rhs>
</emu-production></emu-grammar>
  <emu-alg><ol><li>Let <var>list</var> be PrivateFieldDefinitions of <emu-nt><a href="#prod-ClassElementList">ClassElementList</a></emu-nt>.</li><li>If <emu-nt><a href="#prod-ClassElement">ClassElement</a></emu-nt> is the production <emu-grammar collapsed=""><emu-production name="ClassElement" class=" inline">
    <emu-nt><a href="#prod-ClassElement">ClassElement</a></emu-nt><emu-geq>:</emu-geq><emu-rhs a="a97886b0"><emu-nt><a href="#prod-PrivateFieldDefinition">PrivateFieldDefinition</a></emu-nt></emu-rhs>
</emu-production></emu-grammar> , append <emu-nt><a href="#prod-ClassElement">ClassElement</a></emu-nt> to the end of <var>list</var>.</li><li>Return <var>list</var>.
  </li></ol></emu-alg>
</emu-clause>

<emu-clause id="sec-instance-slot-definition">
  <h1><span class="secnum">2.5</span>Runtime Semantics: PrivateFieldDefinitionEvaluation<span class="utils"><span class="anchor"><a href="#sec-instance-slot-definition">#</a></span></span></h1>
  <emu-grammar collapsed=""><emu-production name="PrivateFieldDefinition">
    <emu-nt><a href="#prod-PrivateFieldDefinition">PrivateFieldDefinition</a></emu-nt><emu-geq>:</emu-geq><emu-rhs a="ce92e404"><emu-nt><a href="#prod-PrivateName">PrivateName</a></emu-nt><emu-nt params="In, ?Yield" optional=""><a href="https://tc39.github.io/ecma262#prod-Initializer">Initializer</a><emu-mods><emu-params>[In, ?Yield]</emu-params><emu-opt>opt</emu-opt></emu-mods></emu-nt><emu-t>;</emu-t></emu-rhs>
</emu-production></emu-grammar>
  <emu-alg><ol><li>Let <var>bindingName</var> be StringValue of <emu-nt><a href="#prod-PrivateName">PrivateName</a></emu-nt>.</li><li>Let <var>privateMap</var> be ! <emu-xref aoid="Construct"><a href="https://tc39.github.io/ecma262#sec-construct">Construct</a></emu-xref>(<emu-xref href="#sec-weakmap-constructor"><a href="https://tc39.github.io/ecma262#sec-weakmap-constructor">%WeakMap%</a></emu-xref>).</li><li>Let <var>scope</var> be the <emu-xref href="#running-execution-context"><a href="https://tc39.github.io/ecma262#running-execution-context">running execution context</a></emu-xref>'s LexicalEnvironment.</li><li>Let <var>scopeEnvRec</var> be <var>scope</var>'s <emu-xref href="#sec-lexical-environments"><a href="https://tc39.github.io/ecma262#sec-lexical-environments">EnvironmentRecord</a></emu-xref>.</li><li>Perform ! <var>scopeEnvRec</var>.InitializeBinding(<var>bindingName</var>, <var>privateMap</var>).</li><li>NOTE: Since <var>bindingName</var> is not a valid <emu-nt><a href="https://tc39.github.io/ecma262#prod-Identifier">Identifier</a></emu-nt>, <var>privateMap</var> is not visible to user code.</li><li>If <emu-nt optional=""><a href="https://tc39.github.io/ecma262#prod-Initializer">Initializer</a><emu-mods><emu-opt>opt</emu-opt></emu-mods></emu-nt> is present, let <var>initializer</var> be <emu-nt optional=""><a href="https://tc39.github.io/ecma262#prod-Initializer">Initializer</a><emu-mods><emu-opt>opt</emu-opt></emu-mods></emu-nt>.</li><li>Else, let <var>initializer</var> be <emu-const>empty</emu-const>.</li><li>Return <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.github.io/ecma262#sec-list-and-record-specification-type">Record</a></emu-xref>{[[map]]: <var>privateMap</var>, [[initializer]]: <var>initializer</var>}.
  </li></ol></emu-alg>
</emu-clause>

<!-- TODO: When we create a new function, we need to initialize the PrivateFields slot to an empty List -->

<emu-clause id="sec-runtime-semantics-classdefinitionevaluation">
  <h1><span class="secnum">2.6</span>Runtime Semantics: ClassDefinitionEvaluation<span class="utils"><span class="anchor"><a href="#sec-runtime-semantics-classdefinitionevaluation">#</a></span></span></h1>
  <p>With parameter <var>className</var>.</p>
  <emu-grammar collapsed=""><emu-production name="ClassTail" id="prod-ClassTail">
    <emu-nt><a href="#prod-ClassTail">ClassTail</a></emu-nt><emu-geq>:</emu-geq><emu-rhs a="b8ea6aa5"><emu-nt optional=""><a href="https://tc39.github.io/ecma262#prod-ClassHeritage">ClassHeritage</a><emu-mods><emu-opt>opt</emu-opt></emu-mods></emu-nt><emu-t>{</emu-t><emu-nt optional=""><a href="#prod-ClassBody">ClassBody</a><emu-mods><emu-opt>opt</emu-opt></emu-mods></emu-nt><emu-t>}</emu-t></emu-rhs>
</emu-production></emu-grammar>
  <emu-alg><ol><li>Let <var>lex</var> be the LexicalEnvironment of the <emu-xref href="#running-execution-context"><a href="https://tc39.github.io/ecma262#running-execution-context">running execution context</a></emu-xref>.</li><li>Let <var>classScope</var> be <emu-xref aoid="NewDeclarativeEnvironment"><a href="https://tc39.github.io/ecma262#sec-newdeclarativeenvironment">NewDeclarativeEnvironment</a></emu-xref>(<var>lex</var>).</li><li>Let <var>classScopeEnvRec</var> be <var>classScope</var>'s <emu-xref href="#sec-lexical-environments"><a href="https://tc39.github.io/ecma262#sec-lexical-environments">EnvironmentRecord</a></emu-xref>.</li><li>If <var>className</var> is not <emu-val>undefined</emu-val>, then<ol><li>Perform <var>classScopeEnvRec</var>.CreateImmutableBinding(<var>className</var>, <emu-val>true</emu-val>).</li></ol></li><li><ins>If <emu-nt optional=""><a href="#prod-ClassBody">ClassBody</a><emu-mods><emu-opt>opt</emu-opt></emu-mods></emu-nt> is present, then</ins><ol><li><ins>For each element <var>dn</var> of the BoundNames of <emu-nt optional=""><a href="#prod-ClassBody">ClassBody</a><emu-mods><emu-opt>opt</emu-opt></emu-mods></emu-nt>,</ins><ol><li><ins>Perform <var>classScopeEnvRec</var>.CreateImmutableBinding(<var>dn</var>, <emu-val>true</emu-val>).</ins></li></ol></li></ol></li><li>If <emu-nt optional=""><a href="https://tc39.github.io/ecma262#prod-ClassHeritage">ClassHeritage</a><emu-mods><emu-opt>opt</emu-opt></emu-mods></emu-nt> is not present, then<ol><li>Let <var>protoParent</var> be the intrinsic object <emu-xref href="#sec-properties-of-the-object-prototype-object"><a href="https://tc39.github.io/ecma262#sec-properties-of-the-object-prototype-object">%ObjectPrototype%</a></emu-xref>.</li><li>Let <var>constructorParent</var> be the intrinsic object <emu-xref href="#sec-properties-of-the-function-constructor"><a href="https://tc39.github.io/ecma262#sec-properties-of-the-function-constructor">%FunctionPrototype%</a></emu-xref>.</li></ol></li><li>Else,<ol><li>Set the <emu-xref href="#running-execution-context"><a href="https://tc39.github.io/ecma262#running-execution-context">running execution context</a></emu-xref>'s LexicalEnvironment to <var>classScope</var>.</li><li>Let <var>superclass</var> be the result of evaluating <emu-nt><a href="https://tc39.github.io/ecma262#prod-ClassHeritage">ClassHeritage</a></emu-nt>.</li><li>Set the <emu-xref href="#running-execution-context"><a href="https://tc39.github.io/ecma262#running-execution-context">running execution context</a></emu-xref>'s LexicalEnvironment to <var>lex</var>.</li><li><emu-xref aoid="ReturnIfAbrupt"><a href="https://tc39.github.io/ecma262#sec-returnifabrupt">ReturnIfAbrupt</a></emu-xref>(<var>superclass</var>).</li><li>If <var>superclass</var> is <emu-val>null</emu-val>, then<ol><li>Let <var>protoParent</var> be <emu-val>null</emu-val>.</li><li>Let <var>constructorParent</var> be the intrinsic object <emu-xref href="#sec-properties-of-the-function-constructor"><a href="https://tc39.github.io/ecma262#sec-properties-of-the-function-constructor">%FunctionPrototype%</a></emu-xref>.</li></ol></li><li>Else if <emu-xref aoid="IsConstructor"><a href="https://tc39.github.io/ecma262#sec-isconstructor">IsConstructor</a></emu-xref>(<var>superclass</var>) is <emu-val>false</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Else,<ol><li>Let <var>protoParent</var> be ? <emu-xref aoid="Get"><a href="https://tc39.github.io/ecma262#sec-get-o-p">Get</a></emu-xref>(<var>superclass</var>, <code>"prototype"</code>).</li><li>If <emu-xref aoid="Type"><a href="https://tc39.github.io/ecma262#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>protoParent</var>) is neither Object nor Null, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>constructorParent</var> be <var>superclass</var>.</li></ol></li></ol></li><li>Let <var>proto</var> be <emu-xref aoid="ObjectCreate"><a href="https://tc39.github.io/ecma262#sec-objectcreate">ObjectCreate</a></emu-xref>(<var>protoParent</var>).</li><li>If <emu-nt optional=""><a href="#prod-ClassBody">ClassBody</a><emu-mods><emu-opt>opt</emu-opt></emu-mods></emu-nt> is not present, let <var>constructor</var> be <emu-const>empty</emu-const>.</li><li>Else, let <var>constructor</var> be ConstructorMethod of <emu-nt><a href="#prod-ClassBody">ClassBody</a></emu-nt>.</li><li>If <var>constructor</var> is <emu-const>empty</emu-const>, then<ol><li>If <emu-nt optional=""><a href="https://tc39.github.io/ecma262#prod-ClassHeritage">ClassHeritage</a><emu-mods><emu-opt>opt</emu-opt></emu-mods></emu-nt> is present, then<ol><li>Let <var>constructor</var> be the result of parsing the source text
          <pre><code class="javascript hljs"><span class="hljs-keyword">constructor</span>(... args){ <span class="hljs-keyword">super</span> (...args);}</code></pre>
          using the syntactic grammar with the goal symbol <emu-nt><a href="https://tc39.github.io/ecma262#prod-MethodDefinition">MethodDefinition</a></emu-nt>.</li></ol></li><li>Else,<ol><li>Let <var>constructor</var> be the result of parsing the source text
          <pre><code class="javascript hljs"><span class="hljs-keyword">constructor</span>( ){ }</code></pre>
          using the syntactic grammar with the goal symbol <emu-nt><a href="https://tc39.github.io/ecma262#prod-MethodDefinition">MethodDefinition</a></emu-nt>.</li></ol></li></ol></li><li>Set the <emu-xref href="#running-execution-context"><a href="https://tc39.github.io/ecma262#running-execution-context">running execution context</a></emu-xref>'s LexicalEnvironment to <var>classScope</var>.</li><li>Let <var>constructorInfo</var> be the result of performing DefineMethod for <var>constructor</var> with arguments <var>proto</var> and <var>constructorParent</var> as the optional <var>functionPrototype</var> argument.</li><li>Assert: <var>constructorInfo</var> is not an <emu-xref href="#sec-completion-record-specification-type"><a href="https://tc39.github.io/ecma262#sec-completion-record-specification-type">abrupt completion</a></emu-xref>.</li><li>Let <var>F</var> be <var>constructorInfo</var>.[[closure]].</li><li>If <emu-nt optional=""><a href="https://tc39.github.io/ecma262#prod-ClassHeritage">ClassHeritage</a><emu-mods><emu-opt>opt</emu-opt></emu-mods></emu-nt> is present, set <var>F</var>'s [[ConstructorKind]] internal slot to <code>"derived"</code>.</li><li>Perform <emu-xref aoid="MakeConstructor"><a href="https://tc39.github.io/ecma262#sec-makeconstructor">MakeConstructor</a></emu-xref>(<var>F</var>, <emu-val>false</emu-val>, <var>proto</var>).</li><li>Perform <emu-xref aoid="MakeClassConstructor"><a href="https://tc39.github.io/ecma262#sec-makeclassconstructor">MakeClassConstructor</a></emu-xref>(<var>F</var>).</li><li>Perform <emu-xref aoid="CreateMethodProperty"><a href="https://tc39.github.io/ecma262#sec-createmethodproperty">CreateMethodProperty</a></emu-xref>(<var>proto</var>, <code>"constructor"</code>, <var>F</var>).</li><li>If <emu-nt optional=""><a href="#prod-ClassBody">ClassBody</a><emu-mods><emu-opt>opt</emu-opt></emu-mods></emu-nt> is not present, let <var>methods</var> be a new empty <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.github.io/ecma262#sec-list-and-record-specification-type">List</a></emu-xref>.</li><li>Else, let <var>methods</var> be NonConstructorMethodDefinitions of <emu-nt><a href="#prod-ClassBody">ClassBody</a></emu-nt>.</li><li>For each <emu-nt><a href="#prod-ClassElement">ClassElement</a></emu-nt> <var>m</var> in order from <var>methods</var>,<ol><li>If IsStatic of <var>m</var> is <emu-val>false</emu-val>, then<ol><li>Let <var>status</var> be the result of performing PropertyDefinitionEvaluation for <var>m</var> with arguments <var>proto</var> and <emu-val>false</emu-val>.</li></ol></li><li>Else,<ol><li>Let <var>status</var> be the result of performing PropertyDefinitionEvaluation for <var>m</var> with arguments <var>F</var> and <emu-val>false</emu-val>.</li></ol></li><li>If <var>status</var> is an <emu-xref href="#sec-completion-record-specification-type"><a href="https://tc39.github.io/ecma262#sec-completion-record-specification-type">abrupt completion</a></emu-xref>, then<ol><li>Set the <emu-xref href="#running-execution-context"><a href="https://tc39.github.io/ecma262#running-execution-context">running execution context</a></emu-xref>'s LexicalEnvironment to <var>lex</var>.</li><li>Return <emu-xref aoid="Completion"><a href="https://tc39.github.io/ecma262#sec-completion-record-specification-type">Completion</a></emu-xref>(<var>status</var>).</li></ol></li></ol></li><li><ins>If <emu-nt optional=""><a href="#prod-ClassBody">ClassBody</a><emu-mods><emu-opt>opt</emu-opt></emu-mods></emu-nt> is not present, let <var>fieldDefinitions</var> be a new empty <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.github.io/ecma262#sec-list-and-record-specification-type">List</a></emu-xref>.</ins></li><li><ins>Else, let <var>fieldDefinitions</var> be PrivateFieldDefinitions of <emu-nt><a href="#prod-ClassBody">ClassBody</a></emu-nt>.</ins></li><li><ins>Let <var>privateFields</var> be the value of <var>F</var>'s [[PrivateFields]] internal slot.</ins></li><li><ins>For each <emu-nt><a href="#prod-ClassElement">ClassElement</a></emu-nt> <var>f</var> in order from <var>fieldDefinitions</var>,</ins><ol><li><ins>Let <var>fieldRecord</var> be the result of performing PrivateFieldDefinitionEvaluation for <var>f</var>.</ins></li><li><ins>Append <var>fieldRecord</var> to <var>privateFields</var>.</ins></li></ol></li><li>Set the <emu-xref href="#running-execution-context"><a href="https://tc39.github.io/ecma262#running-execution-context">running execution context</a></emu-xref>'s LexicalEnvironment to <var>lex</var>.</li><li>If <var>className</var> is not <emu-val>undefined</emu-val>, then<ol><li>Perform <var>classScopeEnvRec</var>.InitializeBinding(<var>className</var>, <var>F</var>).</li></ol></li><li>Return <var>F</var>.
  </li></ol></emu-alg>
</emu-clause>
</emu-import>
</emu-clause>

<emu-clause id="sec-initialization">
  <h1><span class="secnum">3</span>Allocation and Initialization<span class="utils"><span class="anchor"><a href="#sec-initialization">#</a></span></span></h1>
  <emu-import href="./initialization.html"><emu-clause id="sec-intiializeprivatefields" aoid="InitializePrivateFields">
  <h1><span class="secnum">3.1</span>InitializePrivateFields ( <var>O</var>, <var>constructor</var> )<span class="utils"><span class="anchor"><a href="#sec-intiializeprivatefields">#</a></span></span></h1>
  <emu-alg><ol><li>Assert: <emu-xref aoid="Type"><a href="https://tc39.github.io/ecma262#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>O</var>) is Object.</li><li>Assert: <var>constructor</var> is an ECMAScript function object.</li><li>Let <var>lex</var> be the <emu-xref href="#sec-lexical-environments"><a href="https://tc39.github.io/ecma262#sec-lexical-environments">Lexical Environment</a></emu-xref> of the <emu-xref href="#running-execution-context"><a href="https://tc39.github.io/ecma262#running-execution-context">running execution context</a></emu-xref>.</li><li>Let <var>initializerScope</var> be the value of <var>constructor</var>'s [[Environment]] internal slot.</li><li>Set the <emu-xref href="#running-execution-context"><a href="https://tc39.github.io/ecma262#running-execution-context">running execution context</a></emu-xref>'s LexicalEnvironment to <var>initializerScope</var>.</li><li>Let <var>fieldRecords</var> be the value of <var>constructor</var>'s [[PrivateFields]] internal slot.</li><li>For element element <var>field</var> of <var>fieldRecords</var>,<ol><li>If <emu-xref aoid="WeakMapHas"><a href="#sec-weakmaphas">WeakMapHas</a></emu-xref>(<var>field</var>.[[map]], <var>O</var>) is <emu-val>true</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Perform ! <emu-xref aoid="WeakMapSet"><a href="#sec-weakmapset">WeakMapSet</a></emu-xref>(<var>field</var>.[[map]], <var>O</var>, <emu-val>undefined</emu-val>).</li></ol></li><li>For element element <var>field</var> of <var>fieldRecords</var>,<ol><li>Let <var>initializer</var> be <var>field</var>.[[initializer]].</li><li>If <var>initializer</var> is not <emu-const>empty</emu-const>, then<ol><li>Let <var>result</var> be the result of evaluating <var>initializer</var>.</li><li>Let <var>initialValue</var> be <emu-xref aoid="GetValue"><a href="#sec-getvalue">GetValue</a></emu-xref>(<var>result</var>).</li><li>If <var>initialValue</var> is an <emu-xref href="#sec-completion-record-specification-type"><a href="https://tc39.github.io/ecma262#sec-completion-record-specification-type">abrupt completion</a></emu-xref>, then<ol><li>Set the <emu-xref href="#running-execution-context"><a href="https://tc39.github.io/ecma262#running-execution-context">running execution context</a></emu-xref>'s LexicalEnvironment to <var>lex</var>.</li><li>Return <emu-xref aoid="Completion"><a href="https://tc39.github.io/ecma262#sec-completion-record-specification-type">Completion</a></emu-xref>(<var>initialValue</var>).</li></ol></li><li>Perform ! <emu-xref aoid="WeakMapSet"><a href="#sec-weakmapset">WeakMapSet</a></emu-xref>(<var>field</var>.[[map]], <var>O</var>, <var>initialValue</var>.[[value]]).</li></ol></li></ol></li><li>Set the <emu-xref href="#running-execution-context"><a href="https://tc39.github.io/ecma262#running-execution-context">running execution context</a></emu-xref>'s LexicalEnvironment to <var>lex</var>.</li><li>Return.
  </li></ol></emu-alg>
</emu-clause>

<emu-clause id="sec-ecmascript-function-objects-construct-argumentslist-newtarget">
  <h1><span class="secnum">3.2</span>[[Construct]] ( <var>argumentsList</var>, <var>newTarget</var> )<span class="utils"><span class="anchor"><a href="#sec-ecmascript-function-objects-construct-argumentslist-newtarget">#</a></span></span></h1>
  <p>The [[Construct]] internal method for an ECMAScript Function object <var>F</var> is called with parameters <var>argumentsList</var> and <var>newTarget</var>. <var>argumentsList</var> is a possibly empty <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.github.io/ecma262#sec-list-and-record-specification-type">List</a></emu-xref> of ECMAScript language values. The following steps are taken:</p>
  <emu-alg><ol><li>Assert: <var>F</var> is an ECMAScript function object.</li><li>Assert: <emu-xref aoid="Type"><a href="https://tc39.github.io/ecma262#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>newTarget</var>) is Object.</li><li>Let <var>callerContext</var> be the <emu-xref href="#running-execution-context"><a href="https://tc39.github.io/ecma262#running-execution-context">running execution context</a></emu-xref>.</li><li>Let <var>kind</var> be <var>F</var>'s [[ConstructorKind]] internal slot.</li><li>If <var>kind</var> is <code>"base"</code>, then<ol><li>Let <var>thisArgument</var> be ? <emu-xref aoid="OrdinaryCreateFromConstructor"><a href="https://tc39.github.io/ecma262#sec-ordinarycreatefromconstructor">OrdinaryCreateFromConstructor</a></emu-xref>(<var>newTarget</var>, <code>"%ObjectPrototype%"</code>).</li></ol></li><li>Let <var>calleeContext</var> be <emu-xref aoid="PrepareForOrdinaryCall"><a href="https://tc39.github.io/ecma262#sec-prepareforordinarycall">PrepareForOrdinaryCall</a></emu-xref>(<var>F</var>, <var>newTarget</var>).</li><li>Assert: <var>calleeContext</var> is now the <emu-xref href="#running-execution-context"><a href="https://tc39.github.io/ecma262#running-execution-context">running execution context</a></emu-xref>.</li><li>If <var>kind</var> is <code>"base"</code>, then<ol><li><ins>Let <var>result</var> be <emu-xref aoid="InitializePrivateFields"><a href="#sec-intiializeprivatefields">InitializePrivateFields</a></emu-xref>(<var>thisArgument</var>, <var>F</var>).</ins></li><li><ins>If <var>result</var> is an <emu-xref href="#sec-completion-record-specification-type"><a href="https://tc39.github.io/ecma262#sec-completion-record-specification-type">abrupt completion</a></emu-xref>, then</ins><ol><li><ins>Remove <var>calleeContext</var> from the <emu-xref href="#execution-context-stack"><a href="https://tc39.github.io/ecma262#execution-context-stack">execution context stack</a></emu-xref> and restore <var>callerContext</var> as the <emu-xref href="#running-execution-context"><a href="https://tc39.github.io/ecma262#running-execution-context">running execution context</a></emu-xref>.</ins></li><li><ins>Return <emu-xref aoid="Completion"><a href="https://tc39.github.io/ecma262#sec-completion-record-specification-type">Completion</a></emu-xref>(<var>result</var>).</ins></li></ol></li><li>Perform ! <emu-xref aoid="OrdinaryCallBindThis"><a href="https://tc39.github.io/ecma262#sec-ordinarycallbindthis">OrdinaryCallBindThis</a></emu-xref>(<var>F</var>, <var>calleeContext</var>, <var>thisArgument</var>).</li></ol></li><li>Let <var>constructorEnv</var> be the LexicalEnvironment of <var>calleeContext</var>.</li><li>Let <var>envRec</var> be <var>constructorEnv</var>'s <emu-xref href="#sec-lexical-environments"><a href="https://tc39.github.io/ecma262#sec-lexical-environments">EnvironmentRecord</a></emu-xref>.</li><li>Let <var>result</var> be <emu-xref aoid="OrdinaryCallEvaluateBody"><a href="https://tc39.github.io/ecma262#sec-ordinarycallevaluatebody">OrdinaryCallEvaluateBody</a></emu-xref>(<var>F</var>, <var>argumentsList</var>).</li><li>Remove <var>calleeContext</var> from the <emu-xref href="#execution-context-stack"><a href="https://tc39.github.io/ecma262#execution-context-stack">execution context stack</a></emu-xref> and restore <var>callerContext</var> as the <emu-xref href="#running-execution-context"><a href="https://tc39.github.io/ecma262#running-execution-context">running execution context</a></emu-xref>.</li><li>If <var>result</var>.[[type]] is <emu-const>return</emu-const>, then<ol><li>If <emu-xref aoid="Type"><a href="https://tc39.github.io/ecma262#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>result</var>.[[value]]) is Object, return <emu-xref aoid="NormalCompletion"><a href="https://tc39.github.io/ecma262#sec-normalcompletion">NormalCompletion</a></emu-xref>(<var>result</var>.[[value]]).</li><li>If <var>kind</var> is <code>"base"</code>, return <emu-xref aoid="NormalCompletion"><a href="https://tc39.github.io/ecma262#sec-normalcompletion">NormalCompletion</a></emu-xref>(<var>thisArgument</var>).</li><li>If <var>result</var>.[[value]] is not <emu-val>undefined</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li></ol></li><li>Else, <emu-xref aoid="ReturnIfAbrupt"><a href="https://tc39.github.io/ecma262#sec-returnifabrupt">ReturnIfAbrupt</a></emu-xref>(<var>result</var>).</li><li>Return ? <var>envRec</var>.GetThisBinding().
  </li></ol></emu-alg>
</emu-clause>

<emu-clause id="sec-super-keyword">
  <h1><span class="secnum">3.3</span>The <code>super</code> Keyword<span class="utils"><span class="anchor"><a href="#sec-super-keyword">#</a></span></span></h1>

  <emu-clause id="sec-super-keyword-runtime-semantics-evaluation">
    <h1><span class="secnum">3.3.1</span>Runtime Semantics: Evaluation<span class="utils"><span class="anchor"><a href="#sec-super-keyword-runtime-semantics-evaluation">#</a></span></span></h1>
    <emu-note><span class="note">Note</span>
      <p>This algorithm has been modified to inline the abstract operation <emu-xref aoid="GetSuperConstructor"><a href="https://tc39.github.io/ecma262#sec-getsuperconstructor">GetSuperConstructor</a></emu-xref>.</p>
    </emu-note>
    <emu-grammar collapsed=""><emu-production name="SuperCall" id="prod-SuperCall">
    <emu-nt><a href="#prod-SuperCall">SuperCall</a></emu-nt><emu-geq>:</emu-geq><emu-rhs a="a833032f"><emu-t>super</emu-t><emu-nt><a href="https://tc39.github.io/ecma262#prod-Arguments">Arguments</a></emu-nt></emu-rhs>
</emu-production></emu-grammar>
    <emu-alg><ol><li>Let <var>newTarget</var> be <emu-xref aoid="GetNewTarget"><a href="https://tc39.github.io/ecma262#sec-getnewtarget">GetNewTarget</a></emu-xref>().</li><li>If <var>newTarget</var> is <emu-val>undefined</emu-val>, throw a <emu-val>ReferenceError</emu-val> exception.</li><li>Let <var>thisER</var> be <emu-xref aoid="GetThisEnvironment"><a href="https://tc39.github.io/ecma262#sec-getthisenvironment">GetThisEnvironment</a></emu-xref>().</li><li>Assert: <var>thisER</var> is a function <emu-xref href="#sec-environment-records"><a href="https://tc39.github.io/ecma262#sec-environment-records">Environment Record</a></emu-xref>.</li><li>Let <var>F</var> be <var>thisER</var>.[[FunctionObject]].</li><li>Assert: <var>F</var> is an ECMAScript function object.</li><li>Let <var>superConstructor</var> be ? <var>F</var>.[[GetPrototypeOf]]().</li><li>If <emu-xref aoid="IsConstructor"><a href="https://tc39.github.io/ecma262#sec-isconstructor">IsConstructor</a></emu-xref>(<var>superConstructor</var>) is <emu-val>false</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>argList</var> be ArgumentListEvaluation of <emu-nt><a href="https://tc39.github.io/ecma262#prod-Arguments">Arguments</a></emu-nt>.</li><li><emu-xref aoid="ReturnIfAbrupt"><a href="https://tc39.github.io/ecma262#sec-returnifabrupt">ReturnIfAbrupt</a></emu-xref>(<var>argList</var>).</li><li>Let <var>result</var> be ? <emu-xref aoid="Construct"><a href="https://tc39.github.io/ecma262#sec-construct">Construct</a></emu-xref>(<var>superConstructor</var>, <var>argList</var>, <var>newTarget</var>).</li><li><ins>Perform ? <emu-xref aoid="InitializePrivateFields"><a href="#sec-intiializeprivatefields">InitializePrivateFields</a></emu-xref>(<var>result</var>, <var>F</var>).</ins></li><li>Return ? <var>thisER</var>.BindThisValue(<var>result</var>).
    </li></ol></emu-alg>

  </emu-clause>

</emu-clause>
</emu-import>
</emu-clause>

<emu-clause id="sec-private-references">
  <h1><span class="secnum">4</span>Private References<span class="utils"><span class="anchor"><a href="#sec-private-references">#</a></span></span></h1>
  <emu-import href="./references.html"><h2>Syntax</h2>
<emu-grammar><emu-production name="MemberExpression" params="Yield" id="prod-MemberExpression">
    <emu-nt params="Yield"><a href="#prod-MemberExpression">MemberExpression</a><emu-mods><emu-params>[Yield]</emu-params></emu-mods></emu-nt><emu-geq>:</emu-geq><emu-rhs a="099d0fbb"><emu-nt params="?Yield"><a href="#prod-MemberExpression">MemberExpression</a><emu-mods><emu-params>[?Yield]</emu-params></emu-mods></emu-nt><emu-t>.</emu-t><emu-nt><a href="#prod-PrivateName">PrivateName</a></emu-nt></emu-rhs>
</emu-production></emu-grammar>

<emu-clause id="sec-private-references-runtime-semantics-evaluation">
  <h1><span class="secnum">4.1</span>Runtime Semantics: Evaluation<span class="utils"><span class="anchor"><a href="#sec-private-references-runtime-semantics-evaluation">#</a></span></span></h1>
  <emu-grammar collapsed=""><emu-production name="MemberExpression">
    <emu-nt><a href="#prod-MemberExpression">MemberExpression</a></emu-nt><emu-geq>:</emu-geq><emu-rhs a="fdcd4d94"><emu-nt><a href="#prod-MemberExpression">MemberExpression</a></emu-nt><emu-t>.</emu-t><emu-nt><a href="#prod-PrivateName">PrivateName</a></emu-nt></emu-rhs>
</emu-production></emu-grammar>
  <emu-alg><ol><li>Let <var>baseReference</var> be the result of evaluating <emu-nt><a href="#prod-MemberExpression">MemberExpression</a></emu-nt>.</li><li>Let <var>baseValue</var> be ? <emu-xref aoid="GetValue"><a href="#sec-getvalue">GetValue</a></emu-xref>(<var>baseReference</var>).</li><li>Let <var>bv</var> be ? <emu-xref aoid="RequireObjectCoercible"><a href="https://tc39.github.io/ecma262#sec-requireobjectcoercible">RequireObjectCoercible</a></emu-xref>(<var>baseValue</var>).</li><li>Let <var>fieldNameString</var> be the StringValue of <emu-nt><a href="#prod-PrivateName">PrivateName</a></emu-nt>.</li><li>Return <emu-xref aoid="MakePrivateReference"><a href="#sec-makeprivatereference">MakePrivateReference</a></emu-xref>(<var>bv</var>, <var>fieldNameString</var>).
  </li></ol></emu-alg>
</emu-clause>

<emu-clause id="sec-delete-operator">
  <h1><span class="secnum">4.2</span>The <code>delete</code> Operator<span class="utils"><span class="anchor"><a href="#sec-delete-operator">#</a></span></span></h1>

  <!-- es6num="12.5.4.1" -->
  <emu-clause id="sec-delete-operator-static-semantics-early-errors">
    <h1><span class="secnum">4.2.1</span>Static Semantics: Early Errors<span class="utils"><span class="anchor"><a href="#sec-delete-operator-static-semantics-early-errors">#</a></span></span></h1>
    <emu-note><span class="note">Note 1</span>
      <p>These static rules have been modified to produce an <emu-xref href="#early-error"><a href="https://tc39.github.io/ecma262#early-error">early error</a></emu-xref> if the <code>delete</code> operator is applied to a private reference.</p>
    </emu-note>
    <emu-grammar collapsed=""><emu-production name="UnaryExpression" id="prod-UnaryExpression">
    <emu-nt><a href="#prod-UnaryExpression">UnaryExpression</a></emu-nt><emu-geq>:</emu-geq><emu-rhs a="bfdc08c3"><emu-t>delete</emu-t><emu-nt><a href="#prod-UnaryExpression">UnaryExpression</a></emu-nt></emu-rhs>
</emu-production></emu-grammar>
    <ul>
      <li>
        It is a Syntax Error if the <emu-nt><a href="#prod-UnaryExpression">UnaryExpression</a></emu-nt> is contained in <emu-xref href="#sec-strict-mode-code"><a href="https://tc39.github.io/ecma262#sec-strict-mode-code">strict mode code</a></emu-xref> and the derived <emu-nt><a href="#prod-UnaryExpression">UnaryExpression</a></emu-nt> is  <emu-grammar collapsed=""><emu-production name="PrimaryExpression" id="prod-PrimaryExpression" class=" inline">
    <emu-nt><a href="#prod-PrimaryExpression">PrimaryExpression</a></emu-nt><emu-geq>:</emu-geq><emu-rhs a="2361f19d"><emu-nt><a href="https://tc39.github.io/ecma262#prod-IdentifierReference">IdentifierReference</a></emu-nt></emu-rhs>
</emu-production></emu-grammar> or  <emu-grammar collapsed=""><emu-production name="MemberExression" id="prod-MemberExression" class=" inline">
    <emu-nt><a href="#prod-MemberExression">MemberExression</a></emu-nt><emu-geq>:</emu-geq><emu-rhs a="fdcd4d94"><emu-nt><a href="#prod-MemberExpression">MemberExpression</a></emu-nt><emu-t>.</emu-t><emu-nt><a href="#prod-PrivateName">PrivateName</a></emu-nt></emu-rhs>
</emu-production></emu-grammar>.
      
      </li>
      <li>
        <p>It is a Syntax Error if the derived <emu-nt><a href="#prod-UnaryExpression">UnaryExpression</a></emu-nt> is
          
          <br>
          <emu-grammar collapsed=""><emu-production name="PrimaryExpression" class=" inline">
    <emu-nt><a href="#prod-PrimaryExpression">PrimaryExpression</a></emu-nt><emu-geq>:</emu-geq><emu-rhs a="cab6f5d7"><emu-nt><a href="https://tc39.github.io/ecma262#prod-CoverParenthesizedExpressionAndArrowParameterList">CoverParenthesizedExpressionAndArrowParameterList</a></emu-nt></emu-rhs>
</emu-production></emu-grammar>
          <br>
          and <emu-nt><a href="https://tc39.github.io/ecma262#prod-CoverParenthesizedExpressionAndArrowParameterList">CoverParenthesizedExpressionAndArrowParameterList</a></emu-nt> ultimately derives a phrase that, if used in place of <emu-nt><a href="#prod-UnaryExpression">UnaryExpression</a></emu-nt>, would produce a Syntax Error according to these rules. This rule is recursively applied.</p>
      </li>
    </ul>
    <emu-note><span class="note">Note 2</span>
      <p>The last rule means that expressions such as <code>delete (((foo)))</code> produce early errors because of recursive application of the first rule.</p>
    </emu-note>
  </emu-clause>

  <emu-clause id="sec-delete-operator-runtime-semantics-evaluation">
    <h1><span class="secnum">4.2.2</span>Runtime Semantics: Evaluation<span class="utils"><span class="anchor"><a href="#sec-delete-operator-runtime-semantics-evaluation">#</a></span></span></h1>
    <emu-grammar collapsed=""><emu-production name="UnaryExpression">
    <emu-nt><a href="#prod-UnaryExpression">UnaryExpression</a></emu-nt><emu-geq>:</emu-geq><emu-rhs a="bfdc08c3"><emu-t>delete</emu-t><emu-nt><a href="#prod-UnaryExpression">UnaryExpression</a></emu-nt></emu-rhs>
</emu-production></emu-grammar>
    <emu-alg><ol><li>Let <var>ref</var> be the result of evaluating <emu-nt><a href="#prod-UnaryExpression">UnaryExpression</a></emu-nt>.</li><li><emu-xref aoid="ReturnIfAbrupt"><a href="https://tc39.github.io/ecma262#sec-returnifabrupt">ReturnIfAbrupt</a></emu-xref>(<var>ref</var>).</li><li>If <emu-xref aoid="Type"><a href="https://tc39.github.io/ecma262#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>ref</var>) is not <emu-xref href="#sec-reference-specification-type"><a href="#sec-reference-specification-type">Reference</a></emu-xref>, return <emu-val>true</emu-val>.</li><li>If IsUnresolvableReference(<var>ref</var>) is <emu-val>true</emu-val>, then<ol><li>Assert: IsStrictReference(<var>ref</var>) is <emu-val>false</emu-val>.</li><li>Return <emu-val>true</emu-val>.</li></ol></li><li>If IsPropertyReference(<var>ref</var>) is <emu-val>true</emu-val>, then<ol><li><ins>Assert: IsPrivateReference(<var>ref</var>) is <emu-val>false</emu-val>.</ins></li><li>If IsSuperReference(<var>ref</var>), throw a <emu-val>ReferenceError</emu-val> exception.</li><li>Let <var>baseObj</var> be ! <emu-xref aoid="ToObject"><a href="https://tc39.github.io/ecma262#sec-toobject">ToObject</a></emu-xref>(GetBase(<var>ref</var>)).</li><li>Let <var>deleteStatus</var> be ? <var>baseObj</var>.[[Delete]](GetReferencedName(<var>ref</var>)).</li><li>If <var>deleteStatus</var> is <emu-val>false</emu-val> and IsStrictReference(<var>ref</var>) is <emu-val>true</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Return <var>deleteStatus</var>.</li></ol></li><li>Else <var>ref</var> is a <emu-xref href="#sec-reference-specification-type"><a href="#sec-reference-specification-type">Reference</a></emu-xref> to an <emu-xref href="#sec-environment-records"><a href="https://tc39.github.io/ecma262#sec-environment-records">Environment Record</a></emu-xref> binding,<ol><li>Let <var>bindings</var> be GetBase(<var>ref</var>).</li><li>Return ? <var>bindings</var>.DeleteBinding(GetReferencedName(<var>ref</var>)).
    </li></ol></li></ol></emu-alg>
    <emu-note><span class="note">Note</span>
      <p>When a <code>delete</code> operator occurs within <emu-xref href="#sec-strict-mode-code"><a href="https://tc39.github.io/ecma262#sec-strict-mode-code">strict mode code</a></emu-xref>, a <emu-val>SyntaxError</emu-val> exception is thrown if its <emu-nt><a href="#prod-UnaryExpression">UnaryExpression</a></emu-nt> is a direct reference to a variable, function argument, or function name. In addition, if a <code>delete</code> operator occurs within <emu-xref href="#sec-strict-mode-code"><a href="https://tc39.github.io/ecma262#sec-strict-mode-code">strict mode code</a></emu-xref> and the property to be deleted has the attribute { [[Configurable]]: <emu-val>false</emu-val> }, a <emu-val>TypeError</emu-val> exception is thrown.</p>
    </emu-note>
  </emu-clause>
</emu-clause>

<emu-clause id="sec-reference-specification-type">
  <h1><span class="secnum">4.3</span>The Reference Specification Type<span class="utils"><span class="anchor"><a href="#sec-reference-specification-type">#</a></span></span></h1>
  <emu-note><span class="note">Note</span>
    <p>The Reference type is used to explain the behaviour of such operators as <code>delete</code>, <code>typeof</code>, the assignment operators, the <code>super</code> keyword and other language features. For example, the left-hand operand of an assignment is expected to produce a reference.</p>
  </emu-note>
  <p>A  <dfn>Reference</dfn> is a resolved name or property binding. A Reference consists of  <ins>four</ins> components, the  <em>base</em> value, the  <em>referenced name</em>, the Boolean valued  <em>strict reference</em> flag,  <ins>and the Boolean valued  <em>private reference</em> flag</ins>. The  <em>base</em> value is either <emu-val>undefined</emu-val>, an Object, a Boolean, a String, a Symbol, a Number, or an <emu-xref href="#sec-environment-records"><a href="https://tc39.github.io/ecma262#sec-environment-records">Environment Record</a></emu-xref> (<emu-xref href="#sec-environment-records"><a href="https://tc39.github.io/ecma262#sec-environment-records">8.1.1</a></emu-xref>). A <var>base</var> value of <emu-val>undefined</emu-val> indicates that the Reference could not be resolved to a binding. The  <em>referenced name</em> is a String value or a Symbol value.</p>
  <p>A Super Reference is a Reference that is used to represent a name binding that was expressed using the super keyword. A Super Reference has an additional <var>thisValue</var> component and its <var>base</var> value will never be an <emu-xref href="#sec-environment-records"><a href="https://tc39.github.io/ecma262#sec-environment-records">Environment Record</a></emu-xref>.</p>
  <p>The following abstract operations are used in this specification to access the components of references:</p>
  <ul>
    <li>
      GetBase(V). Returns the <var>base</var> value component of the reference V.
    
    </li>
    <li>
      GetReferencedName(V). Returns the  <i>referenced name</i> component of the reference V.
    
    </li>
    <li>
      IsStrictReference(V). Returns the  <i>strict reference</i> flag component of the reference V.
    
    </li>
    <li>
      HasPrimitiveBase(V). Returns <emu-val>true</emu-val> if <emu-xref aoid="Type"><a href="https://tc39.github.io/ecma262#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>base</var>) is Boolean, String, Symbol, or Number.
    
    </li>
    <li>
      IsPropertyReference(V). Returns <emu-val>true</emu-val> if either the <var>base</var> value is an object or HasPrimitiveBase(V) is <emu-val>true</emu-val>; otherwise returns <emu-val>false</emu-val>.
    
    </li>
    <li>
      IsUnresolvableReference(V). Returns <emu-val>true</emu-val> if the <var>base</var> value is <emu-val>undefined</emu-val> and <emu-val>false</emu-val> otherwise.
    
    </li>
    <li>
      IsSuperReference(V). Returns <emu-val>true</emu-val> if this reference has a <var>thisValue</var> component.
    
    </li>
    <li>
      <ins>IsPrivateReference(V). Returns the  <i>private reference</i> flag component of the reference V.</ins>
    </li>
  </ul>
  <p>The following abstract operations are used in this specification to operate on references:</p>

  <!-- es6num="6.2.3.1" -->
  <emu-clause id="sec-getvalue" aoid="GetValue">
    <h1><span class="secnum">4.3.1</span>GetValue ( <var>V</var> )<span class="utils"><span class="anchor"><a href="#sec-getvalue">#</a></span></span></h1>
    <emu-alg><ol><li><emu-xref aoid="ReturnIfAbrupt"><a href="https://tc39.github.io/ecma262#sec-returnifabrupt">ReturnIfAbrupt</a></emu-xref>(<var>V</var>).</li><li>If <emu-xref aoid="Type"><a href="https://tc39.github.io/ecma262#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>V</var>) is not <emu-xref href="#sec-reference-specification-type"><a href="#sec-reference-specification-type">Reference</a></emu-xref>, return <var>V</var>.</li><li>Let <var>base</var> be GetBase(<var>V</var>).</li><li>If IsUnresolvableReference(<var>V</var>), throw a <emu-val>ReferenceError</emu-val> exception.</li><li>If IsPropertyReference(<var>V</var>), then<ol><li>If HasPrimitiveBase(<var>V</var>), then<ol><li>Assert: In this case, <var>base</var> will never be <emu-val>null</emu-val> or <emu-val>undefined</emu-val>.</li><li>Let <var>base</var> be <emu-xref aoid="ToObject"><a href="https://tc39.github.io/ecma262#sec-toobject">ToObject</a></emu-xref>(<var>base</var>).</li></ol></li><li><ins>If IsPrivateReference(<var>V</var>), then</ins><ol><li><ins>Let <var>privateMap</var> be ? <emu-xref aoid="ResolveBinding"><a href="https://tc39.github.io/ecma262#sec-resolvebinding">ResolveBinding</a></emu-xref>(GetReferencedName(<var>V</var>)).</ins></li><li><ins>Assert: <var>privateMap</var> is a WeakMap object.</ins></li><li><ins>If <emu-xref aoid="WeakMapHas"><a href="#sec-weakmaphas">WeakMapHas</a></emu-xref>(<var>privateMap</var>, <var>base</var>) is <emu-val>false</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</ins></li><li><ins>Return ! <emu-xref aoid="WeakMapGet"><a href="#sec-weakmapget">WeakMapGet</a></emu-xref>(<var>privateMap</var>, <var>base</var>).</ins></li></ol></li><li>Return ? <var>base</var>.[[Get]](GetReferencedName(<var>V</var>), <emu-xref aoid="GetThisValue"><a href="https://tc39.github.io/ecma262#sec-getthisvalue">GetThisValue</a></emu-xref>(<var>V</var>)).</li></ol></li><li>Else <var>base</var> must be an <emu-xref href="#sec-environment-records"><a href="https://tc39.github.io/ecma262#sec-environment-records">Environment Record</a></emu-xref>,<ol><li>Return ? <var>base</var>.GetBindingValue(GetReferencedName(<var>V</var>), IsStrictReference(<var>V</var>)) (see <emu-xref href="#sec-environment-records"><a href="https://tc39.github.io/ecma262#sec-environment-records">8.1.1</a></emu-xref>).
    </li></ol></li></ol></emu-alg>
    <emu-note><span class="note">Note</span>
      <p>The object that may be created in step 5.a.ii is not accessible outside of the above abstract operation and the ordinary object [[Get]] internal method. An implementation might choose to avoid the actual creation of the object.</p>
    </emu-note>
  </emu-clause>

  <!-- es6num="6.2.3.2" -->
  <emu-clause id="sec-putvalue" aoid="PutValue">
    <h1><span class="secnum">4.3.2</span>PutValue ( <var>V</var>, <var>W</var> )<span class="utils"><span class="anchor"><a href="#sec-putvalue">#</a></span></span></h1>
    <emu-alg><ol><li><emu-xref aoid="ReturnIfAbrupt"><a href="https://tc39.github.io/ecma262#sec-returnifabrupt">ReturnIfAbrupt</a></emu-xref>(<var>V</var>).</li><li><emu-xref aoid="ReturnIfAbrupt"><a href="https://tc39.github.io/ecma262#sec-returnifabrupt">ReturnIfAbrupt</a></emu-xref>(<var>W</var>).</li><li>If <emu-xref aoid="Type"><a href="https://tc39.github.io/ecma262#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>V</var>) is not <emu-xref href="#sec-reference-specification-type"><a href="#sec-reference-specification-type">Reference</a></emu-xref>, throw a <emu-val>ReferenceError</emu-val> exception.</li><li>Let <var>base</var> be GetBase(<var>V</var>).</li><li>If IsUnresolvableReference(<var>V</var>), then<ol><li>If IsStrictReference(<var>V</var>) is <emu-val>true</emu-val>, then<ol><li>Throw a <emu-val>ReferenceError</emu-val> exception.</li></ol></li><li>Let <var>globalObj</var> be <emu-xref aoid="GetGlobalObject"><a href="https://tc39.github.io/ecma262#sec-getglobalobject">GetGlobalObject</a></emu-xref>().</li><li>Return ? <emu-xref aoid="Set"><a href="https://tc39.github.io/ecma262#sec-set-o-p-v-throw">Set</a></emu-xref>(<var>globalObj</var>, GetReferencedName(<var>V</var>), <var>W</var>, <emu-val>false</emu-val>).</li></ol></li><li>Else if IsPropertyReference(<var>V</var>), then<ol><li>If HasPrimitiveBase(<var>V</var>) is <emu-val>true</emu-val>, then<ol><li>Assert: In this case, <var>base</var> will never be <emu-val>null</emu-val> or <emu-val>undefined</emu-val>.</li><li>Set <var>base</var> to <emu-xref aoid="ToObject"><a href="https://tc39.github.io/ecma262#sec-toobject">ToObject</a></emu-xref>(<var>base</var>).</li></ol></li><li><ins>If IsPrivateReference(<var>V</var>), then</ins><ol><li><ins>Let <var>privateMap</var> be ? <emu-xref aoid="ResolveBinding"><a href="https://tc39.github.io/ecma262#sec-resolvebinding">ResolveBinding</a></emu-xref>(GetReferencedName(<var>V</var>)).</ins></li><li><ins>Assert: <var>privateMap</var> is a WeakMap object.</ins></li><li><ins>If <emu-xref aoid="WeakMapHas"><a href="#sec-weakmaphas">WeakMapHas</a></emu-xref>(<var>privateMap</var>, <var>base</var>) is <emu-val>false</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</ins></li><li><ins>Perform ! <emu-xref aoid="WeakMapSet"><a href="#sec-weakmapset">WeakMapSet</a></emu-xref>(<var>privateMap</var>, <var>base</var>, <var>W</var>).</ins></li></ol></li><li>Else,<ol><li>Let <var>succeeded</var> be ? <var>base</var>.[[Set]](GetReferencedName(<var>V</var>), <var>W</var>, <emu-xref aoid="GetThisValue"><a href="https://tc39.github.io/ecma262#sec-getthisvalue">GetThisValue</a></emu-xref>(<var>V</var>)).</li><li>If <var>succeeded</var> is <emu-val>false</emu-val> and IsStrictReference(<var>V</var>) is <emu-val>true</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li></ol></li><li>Return.</li></ol></li><li>Else <var>base</var> must be an <emu-xref href="#sec-environment-records"><a href="https://tc39.github.io/ecma262#sec-environment-records">Environment Record</a></emu-xref>.<ol><li>Return ? <var>base</var>.SetMutableBinding(GetReferencedName(<var>V</var>), <var>W</var>, IsStrictReference(<var>V</var>)) (see <emu-xref href="#sec-environment-records"><a href="https://tc39.github.io/ecma262#sec-environment-records">8.1.1</a></emu-xref>).
    </li></ol></li></ol></emu-alg>
    <emu-note><span class="note">Note</span>
      <p>The object that may be created in step 6.a.ii is not accessible outside of the above algorithm and the ordinary object [[Set]] internal method. An implementation might choose to avoid the actual creation of that object.</p>
    </emu-note>
  </emu-clause>

  <!--
  1. Replace all occurances of "Return a value of type Reference..." with calls to MakeReference
  2. Rename MakeSuperPropertyReference to MakeSuperReference for consistency.

  <emu-clause id="sec-makereference" aoid="MakeReference">
    <h1>MakeReference ( _baseValue_, _referencedName_, _strict_ )</h1>
    <emu-alg>
      1. Return a value of type Reference whose base value is _baseValue_, whose referenced name is _referencedName_, whose strict reference flag is _strict_, and whose private reference component is *false*.
    </emu-alg>
  </emu-clause>
  -->

  <emu-clause id="sec-makeprivatereference" aoid="MakePrivateReference">
    <h1><span class="secnum">4.3.3</span>MakePrivateReference ( <var>baseValue</var>, <var>fieldName</var> )<span class="utils"><span class="anchor"><a href="#sec-makeprivatereference">#</a></span></span></h1>
    <emu-alg><ol><li>Return a value of type <emu-xref href="#sec-reference-specification-type"><a href="#sec-reference-specification-type">Reference</a></emu-xref> whose base value is <var>baseValue</var>, whose referenced name is <var>fieldName</var>, whose strict reference flag is <emu-val>true</emu-val>, and whose private reference component is <emu-val>true</emu-val>.
    </li></ol></emu-alg>
  </emu-clause>

</emu-clause>
</emu-import>
</emu-clause>

<emu-clause id="sec-weakmap-abstract-operations">
  <h1><span class="secnum">5</span>WeakMap Abstract Operations<span class="utils"><span class="anchor"><a href="#sec-weakmap-abstract-operations">#</a></span></span></h1>
  <emu-import href="./weakmap.html"><emu-clause id="sec-weakmap.prototype.has">
  <h1><span class="secnum">5.1</span>WeakMap.prototype.has ( <var>key</var> )<span class="utils"><span class="anchor"><a href="#sec-weakmap.prototype.has">#</a></span></span></h1>
  <p>The following steps are taken:</p>
  <emu-alg><ol><li>Let <var>M</var> be the <emu-val>this</emu-val> value.</li><li>If <emu-xref aoid="Type"><a href="https://tc39.github.io/ecma262#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>M</var>) is not Object, throw a <emu-val>TypeError</emu-val> exception.</li><li>If <var>M</var> does not have a [[WeakMapData]] internal slot, throw a <emu-val>TypeError</emu-val> exception.</li><li><ins>Return ! <emu-xref aoid="WeakMapHas"><a href="#sec-weakmaphas">WeakMapHas</a></emu-xref>(<var>M</var>, <var>key</var>).</ins>
  </li></ol></emu-alg>
</emu-clause>

<emu-clause id="sec-weakmap.prototype.get">
  <h1><span class="secnum">5.2</span>WeakMap.prototype.get ( <var>key</var> )<span class="utils"><span class="anchor"><a href="#sec-weakmap.prototype.get">#</a></span></span></h1>
  <p>The following steps are taken:</p>
  <emu-alg><ol><li>Let <var>M</var> be the <emu-val>this</emu-val> value.</li><li>If <emu-xref aoid="Type"><a href="https://tc39.github.io/ecma262#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>M</var>) is not Object, throw a <emu-val>TypeError</emu-val> exception.</li><li>If <var>M</var> does not have a [[WeakMapData]] internal slot, throw a <emu-val>TypeError</emu-val> exception.</li><li><ins>Return ! <emu-xref aoid="WeakMapGet"><a href="#sec-weakmapget">WeakMapGet</a></emu-xref>(<var>M</var>, <var>key</var>).</ins>
  </li></ol></emu-alg>
</emu-clause>

<emu-clause id="sec-weakmap.prototype.set">
  <h1><span class="secnum">5.3</span>WeakMap.prototype.set ( <var>key</var> , <var>value</var> )<span class="utils"><span class="anchor"><a href="#sec-weakmap.prototype.set">#</a></span></span></h1>
  <p>The following steps are taken:</p>
  <emu-alg><ol><li>Let <var>M</var> be the <emu-val>this</emu-val> value.</li><li>If <emu-xref aoid="Type"><a href="https://tc39.github.io/ecma262#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>M</var>) is not Object, throw a <emu-val>TypeError</emu-val> exception.</li><li>If <var>M</var> does not have a [[WeakMapData]] internal slot, throw a <emu-val>TypeError</emu-val> exception.</li><li><ins>Perform ! <emu-xref aoid="WeakMapSet"><a href="#sec-weakmapset">WeakMapSet</a></emu-xref>(<var>M</var>, <var>key</var>, <var>value</var>).</ins></li><li>Return <var>M</var>.
  </li></ol></emu-alg>
</emu-clause>

<emu-clause id="sec-weakmaphas" aoid="WeakMapHas">
  <h1><span class="secnum">5.4</span>WeakMapHas (<var>M</var>, <var>key</var> )<span class="utils"><span class="anchor"><a href="#sec-weakmaphas">#</a></span></span></h1>
  <emu-alg><ol><li>Assert: <var>M</var> is an object with a [[WeakMapData]] internal slot.</li><li>Let <var>entries</var> be the <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.github.io/ecma262#sec-list-and-record-specification-type">List</a></emu-xref> that is the value of <var>M</var>'s [[WeakMapData]] internal slot.</li><li>If <emu-xref aoid="Type"><a href="https://tc39.github.io/ecma262#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>key</var>) is not Object, return <emu-val>false</emu-val>.</li><li>Repeat for each <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.github.io/ecma262#sec-list-and-record-specification-type">Record</a></emu-xref> {[[key]], [[value]]} <var>p</var> that is an element of <var>entries</var>,<ol><li>If <var>p</var>.[[key]] is not <emu-const>empty</emu-const> and <emu-xref aoid="SameValue"><a href="https://tc39.github.io/ecma262#sec-samevalue">SameValue</a></emu-xref>(<var>p</var>.[[key]], <var>key</var>) is <emu-val>true</emu-val>, return <emu-val>true</emu-val>.</li></ol></li><li>Return <emu-val>false</emu-val>.
  </li></ol></emu-alg>
</emu-clause>

<emu-clause id="sec-weakmapget" aoid="WeakMapGet">
  <h1><span class="secnum">5.5</span>WeakMapGet (<var>M</var>, <var>key</var> )<span class="utils"><span class="anchor"><a href="#sec-weakmapget">#</a></span></span></h1>
  <emu-alg><ol><li>Assert: <var>M</var> is an object with a [[WeakMapData]] internal slot.</li><li>Let <var>entries</var> be the <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.github.io/ecma262#sec-list-and-record-specification-type">List</a></emu-xref> that is the value of <var>M</var>'s [[WeakMapData]] internal slot.</li><li>If <emu-xref aoid="Type"><a href="https://tc39.github.io/ecma262#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>key</var>) is not Object, return <emu-val>undefined</emu-val>.</li><li>Repeat for each <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.github.io/ecma262#sec-list-and-record-specification-type">Record</a></emu-xref> {[[key]], [[value]]} <var>p</var> that is an element of <var>entries</var>,<ol><li>If <var>p</var>.[[key]] is not <emu-const>empty</emu-const> and <emu-xref aoid="SameValue"><a href="https://tc39.github.io/ecma262#sec-samevalue">SameValue</a></emu-xref>(<var>p</var>.[[key]], <var>key</var>) is <emu-val>true</emu-val>, return <var>p</var>.[[value]].</li></ol></li><li>Return <emu-val>undefined</emu-val>.
  </li></ol></emu-alg>
</emu-clause>

<emu-clause id="sec-weakmapset" aoid="WeakMapSet">
  <h1><span class="secnum">5.6</span>WeakMapSet (<var>M</var>, <var>key</var>, <var>value</var> )<span class="utils"><span class="anchor"><a href="#sec-weakmapset">#</a></span></span></h1>
  <emu-alg><ol><li>Assert: <var>M</var> is an object with a [[WeakMapData]] internal slot.</li><li>Let <var>entries</var> be the <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.github.io/ecma262#sec-list-and-record-specification-type">List</a></emu-xref> that is the value of <var>M</var>'s [[WeakMapData]] internal slot.</li><li>If <emu-xref aoid="Type"><a href="https://tc39.github.io/ecma262#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>key</var>) is not Object, throw a <emu-val>TypeError</emu-val> exception.</li><li>Repeat for each <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.github.io/ecma262#sec-list-and-record-specification-type">Record</a></emu-xref> {[[key]], [[value]]} <var>p</var> that is an element of <var>entries</var>,<ol><li>If <var>p</var>.[[key]] is not <emu-const>empty</emu-const> and <emu-xref aoid="SameValue"><a href="https://tc39.github.io/ecma262#sec-samevalue">SameValue</a></emu-xref>(<var>p</var>.[[key]], <var>key</var>) is <emu-val>true</emu-val>, then<ol><li>Set <var>p</var>.[[value]] to <var>value</var>.</li><li>Return.</li></ol></li></ol></li><li>Let <var>p</var> be the <emu-xref href="#sec-list-and-record-specification-type"><a href="https://tc39.github.io/ecma262#sec-list-and-record-specification-type">Record</a></emu-xref> {[[key]]: <var>key</var>, [[value]]: <var>value</var>}.</li><li>Append <var>p</var> as the last element of <var>entries</var>.</li><li>Return.
  </li></ol></emu-alg>
</emu-clause>
</emu-import>
</emu-clause>
</body>